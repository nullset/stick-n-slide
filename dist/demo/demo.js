!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";var e,t,n,s,i,r,l,a,o,c,d,h,u,f,p,b=!1;function m(){if(!b){b=!0;var m=navigator.userAgent,g=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(m),y=/(Mac OS X)|(Windows)|(Linux)/.exec(m);if(h=/\b(iPhone|iP[ao]d)/.exec(m),u=/\b(iP[ao]d)/.exec(m),c=/Android/i.exec(m),f=/FBAN\/\w+;/i.exec(m),p=/Mobile/i.exec(m),d=!!/Win64/.exec(m),g){(e=g[1]?parseFloat(g[1]):g[5]?parseFloat(g[5]):NaN)&&document&&document.documentMode&&(e=document.documentMode);var v=/(?:Trident\/(\d+.\d+))/.exec(m);r=v?parseFloat(v[1])+4:e,t=g[2]?parseFloat(g[2]):NaN,n=g[3]?parseFloat(g[3]):NaN,(s=g[4]?parseFloat(g[4]):NaN)?(g=/(?:Chrome\/(\d+\.\d+))/.exec(m),i=g&&g[1]?parseFloat(g[1]):NaN):i=NaN}else e=t=n=i=s=NaN;if(y){if(y[1]){var w=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(m);l=!w||parseFloat(w[1].replace("_","."))}else l=!1;a=!!y[2],o=!!y[3]}else l=a=o=!1}}var g,y={ie:function(){return m()||e},ieCompatibilityMode:function(){return m()||r>e},ie64:function(){return y.ie()&&d},firefox:function(){return m()||t},opera:function(){return m()||n},webkit:function(){return m()||s},safari:function(){return y.webkit()},chrome:function(){return m()||i},windows:function(){return m()||a},osx:function(){return m()||l},linux:function(){return m()||o},iphone:function(){return m()||h},mobile:function(){return m()||h||u||c||p},nativeApp:function(){return m()||f},android:function(){return m()||c},ipad:function(){return m()||u}},v=y,w=!("undefined"==typeof window||!window.document||!window.document.createElement),x={canUseDOM:w,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:w&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:w&&!!window.screen,isInWorker:!w};x.canUseDOM&&(g=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("",""))
/**
   * Checks if an event is supported in the current execution environment.
   *
   * NOTE: This will not work correctly for non-generic events such as `change`,
   * `reset`, `load`, `error`, and `select`.
   *
   * Borrows from Modernizr.
   *
   * @param {string} eventNameSuffix Event name, e.g. "click".
   * @param {?boolean} capture Check if the capture phase is supported.
   * @return {boolean} True if the event is supported.
   * @internal
   * @license Modernizr 3.0.0pre (Custom Build) | MIT
   */;var C=function(e,t){if(!x.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,s=n in document;if(!s){var i=document.createElement("div");i.setAttribute(n,"return;"),s="function"==typeof i[n]}return!s&&g&&"wheel"===e&&(s=document.implementation.hasFeature("Events.wheel","3.0")),s},k=10,E=40,L=800;function _(e){var t=0,n=0,s=0,i=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),s=t*k,i=n*k,"deltaY"in e&&(i=e.deltaY),"deltaX"in e&&(s=e.deltaX),(s||i)&&e.deltaMode&&(1==e.deltaMode?(s*=E,i*=E):(s*=L,i*=L)),s&&!t&&(t=s<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:t,spinY:n,pixelX:s,pixelY:i}}_.getEventType=function(){return v.firefox()?"DOMMouseScroll":C("wheel")?"wheel":"mousewheel"};var T=_;function S(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var s=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&s.firstChild?s.insertBefore(i,s.firstChild):s.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}S('@charset "UTF-8";\ntable.sns {\n  box-sizing: border-box;\n}\ntable.sns * {\n  box-sizing: border-box;\n}\ntable.sns tbody:first-child {\n  /* If a table does *not* start with a <thead>, ensure that cells within the <tbody> secondary <tr> do not have a top border. */\n}\ntable.sns tbody:first-child tr:not(:first-child) th,\ntable.sns tbody:first-child tr:not(:first-child) td {\n  border-top-width: 0;\n}\ntable.sns thead *[class*=sns--is-stuck],\ntable.sns tbody *[class*=sns--is-stuck] {\n  position: relative;\n  transition: box-shadow 0.1s;\n  /*\n    Add a zero-width space character to any empty stuck element. This prevents an issue in IE where\n    cells with no content are collapsed.\n  */\n  /*\n    Because transform removes our <th> from the normal flow of the page, it loses its top and bottom borders\n    (as, from the rendering engine perspective, it is no longer a part of the table).\n    We need to add these borders back via some css generated elements.\n  */\n  /*\n    Elements like input, select, textarea, button can be rendered by tho OS rather than the browser.\n    Because of this, clicking on these elements once they have been "translated" via translate()\n    can become impossible. By positioning them and adding a z-index, we force the browser to handle rendering\n    which fixes the issue.\n  */\n}\ntable.sns thead *[class*=sns--is-stuck]:empty:after,\ntable.sns tbody *[class*=sns--is-stuck]:empty:after {\n  content: "â€‹";\n}\ntable.sns thead *[class*=sns--is-stuck]:not(.sns__placeholder-cell) b,\ntable.sns tbody *[class*=sns--is-stuck]:not(.sns__placeholder-cell) b {\n  position: relative;\n  z-index: 1;\n}\ntable.sns thead *[class*=sns--is-stuck]:not(.sns__placeholder-cell):before,\ntable.sns tbody *[class*=sns--is-stuck]:not(.sns__placeholder-cell):before {\n  content: "";\n  position: absolute;\n  border: inherit;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  margin: inherit;\n  transition: box-shadow 0.1s;\n  box-shadow: var(--x-shadow, 0), var(--y-shadow, 0);\n  z-index: 0;\n}\ntable.sns thead *[class*=sns--is-stuck] .sns__placeholder-cell,\ntable.sns tbody *[class*=sns--is-stuck] .sns__placeholder-cell {\n  position: relative;\n}\ntable.sns thead *[class*=sns--is-stuck] .sns__cell-inner,\ntable.sns tbody *[class*=sns--is-stuck] .sns__cell-inner {\n  position: relative;\n  height: inherit;\n}\ntable.sns thead *[class*=sns--is-stuck] > *,\ntable.sns tbody *[class*=sns--is-stuck] > * {\n  position: relative;\n  z-index: 1;\n}\ntable.sns thead *.sns--is-stuck,\ntable.sns tbody *.sns--is-stuck {\n  z-index: 100;\n}\ntable.sns thead *.sns--is-stuck-x,\ntable.sns tbody *.sns--is-stuck-x {\n  z-index: 80;\n}\ntable.sns thead *.sns--is-stuck-y,\ntable.sns tbody *.sns--is-stuck-y {\n  z-index: 90;\n}\n\n@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n  table.sns {\n    margin-top: -2px;\n    margin-left: -1px;\n  }\n}');const A=new WeakMap,N={childList:!0,subtree:!0};function F(e,t){t.disconnect();const n=function e(t,n){return t.classList?t.classList.contains(n)?t:t.parentElement?e(t.parentElement,n):void 0:e(t.parentElement,n)}(e[0].target,"sns");e.forEach(e=>{n.classList.contains("sns--pause-mutation")||"childList"===e.type&&(Array.prototype.slice.call(e.removedNodes).forEach(t=>{t.classList&&("TR"==e.target.tagName?Array.prototype.slice.call(e.removedNodes).forEach((t,n)=>{const s=e.addedNodes[n],i=t.attributes;for(let e=i.length-1;e>=0;e--){const n=i[e].name,r=i[e].value;if("style"===n){const e=(t.getAttribute("style")||"").replace(/;$/,"");s.setAttribute("style",`${e}; ${s.getAttribute("style")}`)}else"class"===n?Array.prototype.slice.call(t.classList).forEach(e=>{s.classList.add(e)}):null===s.getAttribute(n)&&s.setAttribute(n,r)}const r=t.firstChild,l=r.firstChild;for(;l.firstChild;)l.removeChild(l.firstChild);for(;s.firstChild;)l.appendChild(s.firstChild);s.appendChild(r)}):t.classList.contains("sns__cell-inner")&&(e.target.innerCellStyle=t.getAttribute("style")))}),Array.prototype.slice.call(e.addedNodes).forEach(t=>{if(e.target.classList.contains("sns__placeholder-cell"))if(e.target.innerCellStyle){const n=document.createElement("div");n.setAttribute("class","sns__cell-inner"),n.setAttribute("style",e.target.innerCellStyle),delete e.target.innerCellStyle;const s=document.createElement("div");s.classList.add("sns__cell-contents"),s.appendChild(t),n.appendChild(s),e.target.appendChild(n)}else{const t=document.createElement("div");t.setAttribute("class","sns__cell-inner");const n=document.createElement("div");for(n.classList.add("sns__cell-contents");e.target.firstChild;){const s=e.target.firstChild;if(s.classList&&s.classList.contains("sns__cell-inner")){for(t.setAttribute("style",e.target.firstChild.getAttribute("style"));s.firstChild.firstChild;)n.appendChild(s.firstChild.firstChild);e.target.removeChild(s)}else n.appendChild(s)}t.appendChild(n),e.target.appendChild(t)}if(e.target.classList.contains("sns__cell-inner")){const n=document.createElement("div");if(n.classList.add("sns__cell-contents"),Array.prototype.slice.call(e.target.children).find(e=>e.classList.contains("sns__cell-contents"))){for(;e.target.firstChild;){const t=e.target.firstChild;if(t.classList&&t.classList.contains("sns__cell-contents")){for(;t&&t.firstChild;)n.appendChild(t.firstChild);e.target.removeChild(t)}else n.appendChild(t)}e.target.appendChild(n)}else n.appendChild(t),e.target.appendChild(n)}}))}),q(n),requestAnimationFrame(()=>{t.observe(n,N)})}function M({table:e,wrapper:t,stickyElems:n,pixelX:s,pixelY:i,scrollLeft:r,scrollTop:l,scrollWidth:a,scrollHeight:o,clientWidth:c,clientHeight:d,showShadow:h,callback:u,isIE11:f}){const p=a-c,b=o-d;let m=r+s,g=l+i;m>=p&&(m=p),m<=0&&(m=0),g>=b&&(g=b),g<=0&&(g=0),f?(W(e,n,h,m,g),t.scrollLeft=m,t.scrollTop=g):(t.scrollLeft=m,t.scrollTop=g,W(e,n,h,t.scrollLeft,t.scrollTop)),u&&u(m,g)}function I(e){return(e=Math.ceil(e/10))>2?2:e}function B({cell:e,showShadow:t,scrollLeft:n,scrollTop:s}){let i=[];(e.classList.contains("sns--is-stuck-y")||e.classList.contains("sns--is-stuck"))&&i.push(`translateY(${s}px)`),(e.classList.contains("sns--is-stuck-x")||e.classList.contains("sns--is-stuck"))&&i.push(`translateX(${n}px)`),e.style.transform=i.join(" "),function(e,t,n,s){if(!t)return;const i=function(e,t){return`rgba(${window.getComputedStyle(e).backgroundColor.replace("rgb(","").replace(")","").split(",").map(e=>Math.round(.3*parseInt(e,10))).join(",")},${t})`}(e,.4);let r,l="0 0",a="0 0";s&&(r=I(s),a=`0 ${r}px ${i}`);n&&(r=I(n),l=`${r}px 0 ${i}`);e.style.setProperty("--x-shadow",l),e.style.setProperty("--y-shadow",a)}(e,t,n,s)}function W(e,t,n,s=0,i=0){requestAnimationFrame(()=>{t.forEach(e=>{for(let t of e)B({cell:t,showShadow:n,scrollLeft:s,scrollTop:i})}),A.set(e,{left:s,top:i}),e.dispatchEvent(new CustomEvent("sns:scroll",{detail:{scrollLeft:s,scrollTop:i}}))})}function O(e,t,n,s,i){!function(e,t,n,s,i){W(e,t,s,n.scrollLeft,n.scrollTop),i&&i(n.scrollLeft,n.scrollTop)}(e,t,n,s,i)}function q(e){const t=e.getElementsByClassName("sns--is-stuck sns--is-stuck-y sns--is-stuck-x");t.forEach(e=>{e.style.height=""}),requestAnimationFrame(()=>{t.forEach(e=>{e.style.height=`${e.getBoundingClientRect().height}px`})})}function z({cell:e,isFirefox:t,isIE11:n,scrollPositions:{left:s,top:i},showShadow:r}){if(n)!function(e){const t=window.getComputedStyle(e);e.classList.add("sns__placeholder-cell");let n=document.createElement("div");n.setAttribute("class","sns__cell-inner");let s=document.createElement("div");s.setAttribute("class","sns__cell-contents");let i=!0;for(;e.firstChild;)if(s.appendChild(e.firstChild),e.firstChild&&e.firstChild.classList&&e.firstChild.classList.contains("sns__cell-inner")){for(;e.firstChild.firstChild.firstChild;)s.appendChild(e.firstChild.firstChild.firstChild);n.setAttribute("style",e.firstChild.getAttribute("style")),n.style.height="","removeNode"in e.firstChild?e.firstChild.removeNode(!0):e.firstChild.remove(),i=!1}n.appendChild(s),e.innerHTML="",e.appendChild(n),i&&(["padding","border"].forEach(s=>{["Top","Right","Bottom","Left"].forEach(e=>{if("border"===s){const i=t[`border${e}Width`];n.style[`margin${function(e){switch(e){case"Left":return"Right";case"Right":return"Left";case"Top":return"Bottom";case"Bottom":return"Top"}}(e)}`]=`calc(-1 * ${i})`,["Width","Color","Style"].forEach(i=>{const r=t[`${s}${e}${i}`];n.style[`${s}${e}${i}`]=r})}else n.style[`${s}${e}`]=t[`${s}${e}`]}),e.style[s]="0"}),n.style.alignItems=function(e){switch(e){case"middle":return"center";case"top":return"start";case"bottom":return"end";case"baseline":return"baseline";default:return""}}(t.verticalAlign))}(e);else{const n=window.getComputedStyle(e);["Top","Right","Bottom","Left"].forEach(s=>{["Width"].forEach(i=>{let r=n[`border${s}${i}`];if(t){const e=r.match(/([^a-z%]+)([a-z%]+)/);r=`${Math.round(e[1])}${e[2]}`}e.style[`margin${s}`]=`-${r}`})})}B({cell:e,scrollLeft:s,scrollTop:i,showShadow:r})}function D(){return"#"+(16777215*Math.random()<<0).toString(16)}function X(e){e.target.style.backgroundColor=D()}function H(e){e.target.style.borderColor=D()}function P(e){"TD"!==e.target.tagName&&"TH"!==e.target.tagName||e.target.nextElementSibling&&(e.target.colSpan=e.target.colSpan+e.target.nextElementSibling.colSpan,e.target.nextElementSibling.remove())}function Y(e){"TD"!==e.target.tagName&&"TH"!==e.target.tagName||fetch("http://www.randomtext.me/api/lorem/p-1/5-15").then(e=>e.json()).then(t=>{e.target.innerHTML=t.text_out})}S(".wrapper {\n  display: inline-block;\n  overflow: auto;\n  max-width: 100%;\n  max-height: 500px;\n  box-sizing: border-box;\n  border: 1px solid red;\n}\n\ntable {\n  border-collapse: collapse;\n  max-height: 400px;\n  max-width: 100%;\n}\ntable thead tr {\n  background: yellow;\n}\ntable thead th {\n  background: #6698f5;\n  padding: 30px;\n  border: 1px solid #4f74b9;\n  transform-origin: 0 0;\n}\ntable tbody tr:nth-child(2n+1) th, table tbody tr:nth-child(2n+1) td {\n  background: #fff;\n}\ntable tbody tr:nth-child(2n) th, table tbody tr:nth-child(2n) td {\n  background: #efefef;\n}\ntable tbody th, table tbody td {\n  padding: 50px 30px;\n  border: 1px solid lightgray;\n}\ntable .sns--is-stuck-x {\n  background: #e5eeff !important;\n}\n\nbutton[data-active=true] {\n  background: lime;\n}\n\ncode {\n  background: #ddd;\n}"),$(document).ready((function(){var e=$("table");e.find("b").on("click",(function(){alert()})),e.find("thead th:nth-child(-n+3)").each((e,t)=>{$(t).addClass("sns--is-stuck")}),e.find("thead th:nth-child(n+4)").each((e,t)=>{$(t).addClass("sns--is-stuck-y")}),e.find("tbody > tr:nth-child(n+1):nth-child(-n+11) > *:nth-child(-n+3)").addClass("sns--is-stuck-x"),e.find("tbody > tr:nth-child(12) > *:nth-child(-n+2)").addClass("sns--is-stuck-x"),e.find("tbody > tr:nth-child(13) > *:nth-child(-n+1)").addClass("sns--is-stuck-x"),function(e,t={}){const{showShadow:n,callback:s}=t,i=navigator.userAgent.toLowerCase(),r=i.indexOf("firefox")>-1,l=i.indexOf("trident")>-1,a=i.indexOf("edge")>-1,o=l&&!a;"function"==typeof e.toArray?e=e.toArray():Array.isArray(e)||(e=[e]),e.forEach(e=>{if(!e.StickNSlide){e.StickNSlide={};const t=e.parentElement;t.addEventListener("wheel",r=>{const c=T(r);d=!0;const{pixelX:h,pixelY:u}=c,{scrollLeft:f,scrollTop:p,scrollWidth:b,scrollHeight:m,clientWidth:g,clientHeight:y}=t,v={table:e,wrapper:t,stickyElems:i,pixelX:h,pixelY:u,scrollLeft:f,scrollTop:p,scrollWidth:b,scrollHeight:m,clientWidth:g,clientHeight:y,showShadow:n,callback:s,isIE11:o};console.log(i.map(e=>Array.from(e)).flat().length),l||a?(r.preventDefault(),r.stopPropagation(),M(v)):(r.preventDefault(),M(v))},{capture:!0}),t.addEventListener("scroll",()=>{d?d=!1:O(e,i,t,n,s)});const i=["sns--is-stuck","sns--is-stuck-y","sns--is-stuck-x"].reduce((t,n)=>(t.push(e.getElementsByClassName(n)),t),[]);"static"===getComputedStyle(t).position&&(t.style.position="relative"),e.classList.add("sns"),e.style.position="relative",["Top","Left"].forEach(t=>{e[`offset${t}`]>0&&(e.style[t.toLowerCase()]=`-${e[`offset${t}`]}px`)});const c={left:t.scrollLeft,top:t.scrollTop};A.set(e,c),i.forEach(e=>{for(let t of e)z({cell:t,isFirefox:r,isIE11:o,scrollPositions:c,showShadow:n})});let d=!1;requestAnimationFrame(()=>{W(e,i,n,t.scrollLeft,t.scrollTop),o&&q(e),requestAnimationFrame(()=>{if(l&&!a){new MutationObserver(F).observe(e,N)}else new MutationObserver(t=>{const{left:s,top:i}=A.get(e);t.forEach(t=>{const s=t.target,i=s.classList;i.contains("sns--is-stuck")||i.contains("sns--is-stuck-x")||i.contains("sns--is-stuck-y")?z({cell:s,isFirefox:r,isIE11:o,scrollPositions:A.get(e),showShadow:n}):(s.style.margin="",s.style.transform="")})}).observe(e,{subtree:!0,attributes:!0,attributeFilter:["class"]})})})}}),window.addEventListener("resize",()=>{requestAnimationFrame(()=>{e.forEach(e=>{o&&q(e)})})})}(e),document.getElementById("backgroundColor").addEventListener("click",e=>{"true"!==e.currentTarget.dataset.active?document.querySelector("table").addEventListener("click",X):document.querySelector("table").removeEventListener("click",X),e.currentTarget.dataset.active=!e.currentTarget.dataset.active}),document.getElementById("borderColor").addEventListener("click",e=>{"true"!==e.currentTarget.dataset.active?document.querySelector("table").addEventListener("click",H):document.querySelector("table").removeEventListener("click",H),e.currentTarget.dataset.active=!e.currentTarget.dataset.active}),document.getElementById("mergeCellRow").addEventListener("click",e=>{"true"!==e.currentTarget.dataset.active?document.querySelector("table").addEventListener("click",P):document.querySelector("table").removeEventListener("click",P),e.currentTarget.dataset.active=!e.currentTarget.dataset.active}),document.getElementById("changeContent").addEventListener("click",e=>{"true"!==e.currentTarget.dataset.active?document.querySelector("table").addEventListener("click",Y):document.querySelector("table").removeEventListener("click",Y),e.currentTarget.dataset.active=!e.currentTarget.dataset.active})}))}));
//# sourceMappingURL=demo.js.map
