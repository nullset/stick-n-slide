!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self)["stick-n-slide"]=t()}(this,(function(){"use strict";var e,t,s,n,i,l,o,r,a,c,d,h,f,u,p,m=!1;function b(){if(!m){m=!0;var b=navigator.userAgent,y=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(b),g=/(Mac OS X)|(Windows)|(Linux)/.exec(b);if(h=/\b(iPhone|iP[ao]d)/.exec(b),f=/\b(iP[ao]d)/.exec(b),c=/Android/i.exec(b),u=/FBAN\/\w+;/i.exec(b),p=/Mobile/i.exec(b),d=!!/Win64/.exec(b),y){(e=y[1]?parseFloat(y[1]):y[5]?parseFloat(y[5]):NaN)&&document&&document.documentMode&&(e=document.documentMode);var w=/(?:Trident\/(\d+.\d+))/.exec(b);l=w?parseFloat(w[1])+4:e,t=y[2]?parseFloat(y[2]):NaN,s=y[3]?parseFloat(y[3]):NaN,(n=y[4]?parseFloat(y[4]):NaN)?(y=/(?:Chrome\/(\d+\.\d+))/.exec(b),i=y&&y[1]?parseFloat(y[1]):NaN):i=NaN}else e=t=s=i=n=NaN;if(g){if(g[1]){var C=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(b);o=!C||parseFloat(C[1].replace("_","."))}else o=!1;r=!!g[2],a=!!g[3]}else o=r=a=!1}}var y,g={ie:function(){return b()||e},ieCompatibilityMode:function(){return b()||l>e},ie64:function(){return g.ie()&&d},firefox:function(){return b()||t},opera:function(){return b()||s},webkit:function(){return b()||n},safari:function(){return g.webkit()},chrome:function(){return b()||i},windows:function(){return b()||r},osx:function(){return b()||o},linux:function(){return b()||a},iphone:function(){return b()||h},mobile:function(){return b()||h||f||c||p},nativeApp:function(){return b()||u},android:function(){return b()||c},ipad:function(){return b()||f}},w=g,C=!("undefined"==typeof window||!window.document||!window.document.createElement),v={canUseDOM:C,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:C&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:C&&!!window.screen,isInWorker:!C};v.canUseDOM&&(y=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("",""))
/**
   * Checks if an event is supported in the current execution environment.
   *
   * NOTE: This will not work correctly for non-generic events such as `change`,
   * `reset`, `load`, `error`, and `select`.
   *
   * Borrows from Modernizr.
   *
   * @param {string} eventNameSuffix Event name, e.g. "click".
   * @param {?boolean} capture Check if the capture phase is supported.
   * @return {boolean} True if the event is supported.
   * @internal
   * @license Modernizr 3.0.0pre (Custom Build) | MIT
   */;var x=function(e,t){if(!v.canUseDOM||t&&!("addEventListener"in document))return!1;var s="on"+e,n=s in document;if(!n){var i=document.createElement("div");i.setAttribute(s,"return;"),n="function"==typeof i[s]}return!n&&y&&"wheel"===e&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n},L=10,E=40,k=800;function _(e){var t=0,s=0,n=0,i=0;return"detail"in e&&(s=e.detail),"wheelDelta"in e&&(s=-e.wheelDelta/120),"wheelDeltaY"in e&&(s=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=s,s=0),n=t*L,i=s*L,"deltaY"in e&&(i=e.deltaY),"deltaX"in e&&(n=e.deltaX),(n||i)&&e.deltaMode&&(1==e.deltaMode?(n*=E,i*=E):(n*=k,i*=k)),n&&!t&&(t=n<1?-1:1),i&&!s&&(s=i<1?-1:1),{spinX:t,spinY:s,pixelX:n,pixelY:i}}_.getEventType=function(){return w.firefox()?"DOMMouseScroll":x("wheel")?"wheel":"mousewheel"};var A=_;!function(e,t){void 0===t&&(t={});var s=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===s&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}('@charset "UTF-8";\ntable.sns {\n  box-sizing: border-box;\n}\ntable.sns * {\n  box-sizing: border-box;\n}\ntable.sns tbody:first-child {\n  /* If a table does *not* start with a <thead>, ensure that cells within the <tbody> secondary <tr> do not have a top border. */\n}\ntable.sns tbody:first-child tr:not(:first-child) th,\ntable.sns tbody:first-child tr:not(:first-child) td {\n  border-top-width: 0;\n}\ntable.sns thead *[class*=sns--is-stuck],\ntable.sns tbody *[class*=sns--is-stuck] {\n  position: relative;\n  transition: box-shadow 0.1s;\n  /*\n    Add a zero-width space character to any empty stuck element. This prevents an issue in IE where\n    cells with no content are collapsed.\n  */\n  /*\n    Because transform removes our <th> from the normal flow of the page, it loses its top and bottom borders\n    (as, from the rendering engine perspective, it is no longer a part of the table).\n    We need to add these borders back via some css generated elements.\n  */\n  /*\n    Elements like input, select, textarea, button can be rendered by tho OS rather than the browser.\n    Because of this, clicking on these elements once they have been "translated" via translate()\n    can become impossible. By positioning them and adding a z-index, we force the browser to handle rendering\n    which fixes the issue.\n  */\n}\ntable.sns thead *[class*=sns--is-stuck]:empty:after,\ntable.sns tbody *[class*=sns--is-stuck]:empty:after {\n  content: "â€‹";\n}\ntable.sns thead *[class*=sns--is-stuck]:not(.sns__placeholder-cell) b,\ntable.sns tbody *[class*=sns--is-stuck]:not(.sns__placeholder-cell) b {\n  position: relative;\n  z-index: 1;\n}\ntable.sns thead *[class*=sns--is-stuck]:not(.sns__placeholder-cell):before,\ntable.sns tbody *[class*=sns--is-stuck]:not(.sns__placeholder-cell):before {\n  content: "";\n  position: absolute;\n  border: inherit;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  margin: inherit;\n  transition: box-shadow 0.1s;\n  box-shadow: var(--x-shadow, 0), var(--y-shadow, 0);\n  z-index: 0;\n}\ntable.sns thead *[class*=sns--is-stuck] .sns__placeholder-cell,\ntable.sns tbody *[class*=sns--is-stuck] .sns__placeholder-cell {\n  position: relative;\n}\ntable.sns thead *[class*=sns--is-stuck] .sns__cell-inner,\ntable.sns tbody *[class*=sns--is-stuck] .sns__cell-inner {\n  position: relative;\n  height: inherit;\n}\ntable.sns thead *[class*=sns--is-stuck] > *,\ntable.sns tbody *[class*=sns--is-stuck] > * {\n  position: relative;\n  z-index: 1;\n}\ntable.sns thead *.sns--is-stuck,\ntable.sns tbody *.sns--is-stuck {\n  z-index: 100;\n}\ntable.sns thead *.sns--is-stuck-x,\ntable.sns tbody *.sns--is-stuck-x {\n  z-index: 80;\n}\ntable.sns thead *.sns--is-stuck-y,\ntable.sns tbody *.sns--is-stuck-y {\n  z-index: 90;\n}\n\n@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n  table.sns {\n    margin-top: -2px;\n    margin-left: -1px;\n  }\n}');const $=new WeakMap,S={childList:!0,subtree:!0};function T(e,t){t.disconnect();const s=function e(t,s){return t.classList?t.classList.contains(s)?t:t.parentElement?e(t.parentElement,s):void 0:e(t.parentElement,s)}(e[0].target,"sns");e.forEach(e=>{s.classList.contains("sns--pause-mutation")||"childList"===e.type&&(Array.prototype.slice.call(e.removedNodes).forEach(t=>{t.classList&&("TR"==e.target.tagName?Array.prototype.slice.call(e.removedNodes).forEach((t,s)=>{const n=e.addedNodes[s],i=t.attributes;for(let e=i.length-1;e>=0;e--){const s=i[e].name,l=i[e].value;if("style"===s){const e=(t.getAttribute("style")||"").replace(/;$/,"");n.setAttribute("style",`${e}; ${n.getAttribute("style")}`)}else"class"===s?Array.prototype.slice.call(t.classList).forEach(e=>{n.classList.add(e)}):null===n.getAttribute(s)&&n.setAttribute(s,l)}const l=t.firstChild,o=l.firstChild;for(;o.firstChild;)o.removeChild(o.firstChild);for(;n.firstChild;)o.appendChild(n.firstChild);n.appendChild(l)}):t.classList.contains("sns__cell-inner")&&(e.target.innerCellStyle=t.getAttribute("style")))}),Array.prototype.slice.call(e.addedNodes).forEach(t=>{if(e.target.classList.contains("sns__placeholder-cell"))if(e.target.innerCellStyle){const s=document.createElement("div");s.setAttribute("class","sns__cell-inner"),s.setAttribute("style",e.target.innerCellStyle),delete e.target.innerCellStyle;const n=document.createElement("div");n.classList.add("sns__cell-contents"),n.appendChild(t),s.appendChild(n),e.target.appendChild(s)}else{const t=document.createElement("div");t.setAttribute("class","sns__cell-inner");const s=document.createElement("div");for(s.classList.add("sns__cell-contents");e.target.firstChild;){const n=e.target.firstChild;if(n.classList&&n.classList.contains("sns__cell-inner")){for(t.setAttribute("style",e.target.firstChild.getAttribute("style"));n.firstChild.firstChild;)s.appendChild(n.firstChild.firstChild);e.target.removeChild(n)}else s.appendChild(n)}t.appendChild(s),e.target.appendChild(t)}if(e.target.classList.contains("sns__cell-inner")){const s=document.createElement("div");if(s.classList.add("sns__cell-contents"),Array.prototype.slice.call(e.target.children).find(e=>e.classList.contains("sns__cell-contents"))){for(;e.target.firstChild;){const t=e.target.firstChild;if(t.classList&&t.classList.contains("sns__cell-contents")){for(;t&&t.firstChild;)s.appendChild(t.firstChild);e.target.removeChild(t)}else s.appendChild(t)}e.target.appendChild(s)}else s.appendChild(t),e.target.appendChild(s)}}))}),I(s),requestAnimationFrame(()=>{t.observe(s,S)})}function N({table:e,wrapper:t,stickyElems:s,pixelX:n,pixelY:i,scrollLeft:l,scrollTop:o,scrollWidth:r,scrollHeight:a,clientWidth:c,clientHeight:d,showShadow:h,callback:f,isIE11:u}){const p=r-c,m=a-d;let b=l+n,y=o+i;b>=p&&(b=p),b<=0&&(b=0),y>=m&&(y=m),y<=0&&(y=0),u?(W(e,s,h,b,y),t.scrollLeft=b,t.scrollTop=y):(t.scrollLeft=b,t.scrollTop=y,W(e,s,h,t.scrollLeft,t.scrollTop)),f&&f(b,y)}function F(e){return(e=Math.ceil(e/10))>2?2:e}function M({cell:e,showShadow:t,scrollLeft:s,scrollTop:n}){let i=[];(e.classList.contains("sns--is-stuck-y")||e.classList.contains("sns--is-stuck"))&&i.push(`translateY(${n}px)`),(e.classList.contains("sns--is-stuck-x")||e.classList.contains("sns--is-stuck"))&&i.push(`translateX(${s}px)`),e.style.transform=i.join(" "),function(e,t,s,n){if(!t)return;const i=function(e,t){return`rgba(${window.getComputedStyle(e).backgroundColor.replace("rgb(","").replace(")","").split(",").map(e=>Math.round(.3*parseInt(e,10))).join(",")},${t})`}(e,.4);let l,o="0 0",r="0 0";n&&(l=F(n),r=`0 ${l}px ${i}`);s&&(l=F(s),o=`${l}px 0 ${i}`);e.style.setProperty("--x-shadow",o),e.style.setProperty("--y-shadow",r)}(e,t,s,n)}function W(e,t,s,n=0,i=0){requestAnimationFrame(()=>{t.forEach(e=>{for(let t of e)M({cell:t,showShadow:s,scrollLeft:n,scrollTop:i})}),$.set(e,{left:n,top:i}),e.dispatchEvent(new CustomEvent("sns:scroll",{detail:{scrollLeft:n,scrollTop:i}}))})}function O(e,t,s,n,i){!function(e,t,s,n,i){W(e,t,n,s.scrollLeft,s.scrollTop),i&&i(s.scrollLeft,s.scrollTop)}(e,t,s,n,i)}function I(e){const t=e.getElementsByClassName("sns--is-stuck sns--is-stuck-y sns--is-stuck-x");t.forEach(e=>{e.style.height=""}),requestAnimationFrame(()=>{t.forEach(e=>{e.style.height=`${e.getBoundingClientRect().height}px`})})}function z({cell:e,isFirefox:t,isIE11:s,scrollPositions:{left:n,top:i},showShadow:l}){if(s)!function(e){const t=window.getComputedStyle(e);e.classList.add("sns__placeholder-cell");let s=document.createElement("div");s.setAttribute("class","sns__cell-inner");let n=document.createElement("div");n.setAttribute("class","sns__cell-contents");let i=!0;for(;e.firstChild;)if(n.appendChild(e.firstChild),e.firstChild&&e.firstChild.classList&&e.firstChild.classList.contains("sns__cell-inner")){for(;e.firstChild.firstChild.firstChild;)n.appendChild(e.firstChild.firstChild.firstChild);s.setAttribute("style",e.firstChild.getAttribute("style")),s.style.height="","removeNode"in e.firstChild?e.firstChild.removeNode(!0):e.firstChild.remove(),i=!1}s.appendChild(n),e.innerHTML="",e.appendChild(s),i&&(["padding","border"].forEach(n=>{["Top","Right","Bottom","Left"].forEach(e=>{if("border"===n){const i=t[`border${e}Width`];s.style[`margin${function(e){switch(e){case"Left":return"Right";case"Right":return"Left";case"Top":return"Bottom";case"Bottom":return"Top"}}(e)}`]=`calc(-1 * ${i})`,["Width","Color","Style"].forEach(i=>{const l=t[`${n}${e}${i}`];s.style[`${n}${e}${i}`]=l})}else s.style[`${n}${e}`]=t[`${n}${e}`]}),e.style[n]="0"}),s.style.alignItems=function(e){switch(e){case"middle":return"center";case"top":return"start";case"bottom":return"end";case"baseline":return"baseline";default:return""}}(t.verticalAlign))}(e);else{const s=window.getComputedStyle(e);["Top","Right","Bottom","Left"].forEach(n=>{["Width"].forEach(i=>{let l=s[`border${n}${i}`];if(t){const e=l.match(/([^a-z%]+)([a-z%]+)/);l=`${Math.round(e[1])}${e[2]}`}e.style[`margin${n}`]=`-${l}`})})}M({cell:e,scrollLeft:n,scrollTop:i,showShadow:l})}return function(e,t={}){const{showShadow:s,callback:n}=t,i=navigator.userAgent.toLowerCase(),l=i.indexOf("firefox")>-1,o=i.indexOf("trident")>-1,r=i.indexOf("edge")>-1,a=o&&!r;"function"==typeof e.toArray?e=e.toArray():Array.isArray(e)||(e=[e]),e.forEach(e=>{if(!e.StickNSlide){e.StickNSlide={};const t=e.parentElement;t.addEventListener("wheel",l=>{const c=A(l);d=!0;const{pixelX:h,pixelY:f}=c,{scrollLeft:u,scrollTop:p,scrollWidth:m,scrollHeight:b,clientWidth:y,clientHeight:g}=t,w={table:e,wrapper:t,stickyElems:i,pixelX:h,pixelY:f,scrollLeft:u,scrollTop:p,scrollWidth:m,scrollHeight:b,clientWidth:y,clientHeight:g,showShadow:s,callback:n,isIE11:a};console.log(i.map(e=>Array.from(e)).flat().length),o||r?(l.preventDefault(),l.stopPropagation(),N(w)):(l.preventDefault(),N(w))},{capture:!0}),t.addEventListener("scroll",()=>{d?d=!1:O(e,i,t,s,n)});const i=["sns--is-stuck","sns--is-stuck-y","sns--is-stuck-x"].reduce((t,s)=>(t.push(e.getElementsByClassName(s)),t),[]);"static"===getComputedStyle(t).position&&(t.style.position="relative"),e.classList.add("sns"),e.style.position="relative",["Top","Left"].forEach(t=>{e[`offset${t}`]>0&&(e.style[t.toLowerCase()]=`-${e[`offset${t}`]}px`)});const c={left:t.scrollLeft,top:t.scrollTop};$.set(e,c),i.forEach(e=>{for(let t of e)z({cell:t,isFirefox:l,isIE11:a,scrollPositions:c,showShadow:s})});let d=!1;requestAnimationFrame(()=>{W(e,i,s,t.scrollLeft,t.scrollTop),a&&I(e),requestAnimationFrame(()=>{if(o&&!r){new MutationObserver(T).observe(e,S)}else new MutationObserver(t=>{const{left:n,top:i}=$.get(e);t.forEach(t=>{const n=t.target,i=n.classList;i.contains("sns--is-stuck")||i.contains("sns--is-stuck-x")||i.contains("sns--is-stuck-y")?z({cell:n,isFirefox:l,isIE11:a,scrollPositions:$.get(e),showShadow:s}):(n.style.margin="",n.style.transform="")})}).observe(e,{subtree:!0,attributes:!0,attributeFilter:["class"]})})})}}),window.addEventListener("resize",()=>{requestAnimationFrame(()=>{e.forEach(e=>{a&&I(e)})})})}}));
//# sourceMappingURL=stick-n-slide.umd.js.map
